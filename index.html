<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ultibake Showcase</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Raleway:ital,wght@0,500;1,500&display=swap" rel="stylesheet" />
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <style>
/* Base styling for links with a moving, slightly desaturated rainbow */
a {
  color: rgb(255, 85, 85);
  font-weight: normal;
  font-family: 'Outfit', 'Raleway', sans-serif;
  text-decoration: none;
  transition: all 0.3s ease;
}

a:hover,
a:focus {
  background-image: linear-gradient(
    90deg,
    hsl(0, 50%, 50%),
    hsl(60, 50%, 50%),
    hsl(120, 50%, 50%),
    hsl(180, 50%, 50%),
    hsl(240, 50%, 50%),
    hsl(300, 50%, 50%),
    hsl(360, 50%, 50%)
  );
  background-size: 400%;
  color: transparent;
  -webkit-background-clip: text;
  background-clip: text;
  animation: rainbow 10s linear infinite;
}

@keyframes rainbow {
  0% { background-position: 0%; }
  100% { background-position: 400%; }
}

a:hover,
a:focus {
  -webkit-text-stroke: 0;
  text-shadow: none;
}

/* New rainbow-text class for animated rainbow header */
.rainbow-text {
  background-image: linear-gradient(
    90deg,
    hsl(0, 50%, 50%),
    hsl(60, 50%, 50%),
    hsl(120, 50%, 50%),
    hsl(180, 50%, 50%),
    hsl(240, 50%, 50%),
    hsl(300, 50%, 50%),
    hsl(360, 50%, 50%)
  );
  background-size: 400%;
  color: transparent;
  -webkit-background-clip: text;
  background-clip: text;
  animation: rainbow 10s linear infinite;
  text-shadow: none;
}

/* Headers with explicit text sizes */
h1 {
  text-align: center;
  font-family: 'Outfit', 'Raleway', sans-serif;
  font-size: 5rem;
}
h2 {
  text-align: center;
  font-family: 'Outfit', 'Raleway', sans-serif;
  font-size: 4rem;
}
h3, h4 {
  text-align: center;
  font-family: 'Outfit', 'Raleway', sans-serif;
  font-size: 2rem;
}
h5 {
  text-align: center;
  font-family: 'Outfit', 'Raleway', sans-serif;
  font-size: 1.25rem;
}
h6 {
  text-align: center;
  font-family: 'Outfit', 'Raleway', sans-serif;
  font-size: 1rem;
}

/* Main content container */
.content-container {
  background: url('https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/pattern3.svg') repeat;
  background-size: 100px 100px;
  font-family: 'Outfit', 'Raleway', sans-serif;
  padding: 5px;
  font-size: 20px;
  color: white;
  text-shadow: -0.1em 0 0 black, 0.1em 0 0 black, 0 -0.1em 0 black, 0 0.1em 0 black,
    -0.07em -0.07em 0 black, 0.07em -0.07em 0 black, -0.07em 0.07em 0 black,
    0.07em 0.07em 0 black, 0.07em 0.07em 0.2em rgba(0, 0, 0, 0.7);
  border-radius: 15px;
  margin: 0;
  text-align: center;
}

/* Paragraph styling */
p {
  font-size: 1.5em;
  line-height: 1.5;
}

/* Rounded containers */
.rounded-video,
.rounded-carousel {
  border-radius: 15px;
  overflow: hidden;
  cursor: pointer;
}
.rounded-video {
  max-width: 100%;
  margin: 0 auto;
}

/* Carousel sizing for feature carousel */
.rounded-carousel {
  width: 100%;
  height: 30em;
  margin: 0;
}
.carousel-inner > .carousel-item {
  height: 50%;
}

/* Combined Carousel Item Styling for Feature and Step Carousels */
.feature-item,
.step-item {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 0.5em;
  text-align: center;
}

.feature-text,
.step-item p {
  margin-bottom: 0.5em;
}

/* Combined Image Styling for Carousels */
.feature-image {
  position: relative;
  width: 100%;
  height: 35em;
  overflow: hidden;
  display: flex;
  align-items: flex-start;
  justify-content: center;
}

.feature-image img,
.step-item img {
  width: auto;
  height: auto;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  object-position: top center;
  border-radius: 15px;
  background-color: transparent;
}

/* Custom styling for Steps Carousel */
#stepsCarousel {
  height: auto !important;
}

#stepsCarousel .carousel-inner > .carousel-item {
  height: auto !important;
}

#stepsCarousel .carousel-indicators {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  margin: 0;
  padding: 0;
  z-index: 15;
}

#featuresCarousel {
  position: relative;
}

#featuresCarousel .carousel-indicators {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  margin: 0;
  padding: 0;
  z-index: 15;
}

/* Changelog Box styling */
#changelog-box {
  border: 2px solid #555;
  max-height: 400px; /* Adjust height as needed to show roughly 3 entries */
  overflow-y: auto;
  padding: 1rem;
  margin-top: 1rem;
  background-color: #222;
  color: white;
}

/* Each update in its own smaller box */
.changelog-entry {
  border: 1px solid #666;
  padding: 0.5rem;
  margin-bottom: 1rem;
  border-radius: 5px;
}

/* Update items now styled with darker text instead of a darker background */
.update-item {
  color: #ccc;
  padding: 0.3rem;
  margin-left: 20px;
  border-radius: 3px;
  font-size: 0.8em; /* Reduced font size for changelog items */
}
  </style>
</head>
<body>
  <div class="content-container">
    
    <h1>What is Ultibake?</h1>
    <p>
      <strong>Ultibake</strong> completely revamps Blender's baking process, inspired by Substance Painter and Marmoset Toolbag.
      Ultibake follows a <strong>modular design pattern</strong>, which allows you to effortlessly bake textures, even in the most complicated scenes. This also is the only Blender baking tool
      which has support for <strong>decal baking</strong>.
    </p>
    
    <h2>Features</h2>
    <!-- Features Carousel -->
    <div id="featuresCarousel" class="carousel slide rounded-carousel features-carousel" data-bs-pause="hover">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="4" aria-label="Slide 5"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="5" aria-label="Slide 6"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="6" aria-label="Slide 7"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="7" aria-label="Slide 8"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="8" aria-label="Slide 9"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="9" aria-label="Slide 10"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="10" aria-label="Slide 11"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="11" aria-label="Slide 12"></button>
      </div>
      
      <div class="carousel-inner">
        <!-- Slide 1: Bake Visualizer -->
        <div class="carousel-item active">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Bake Visualizer</h3>
              <div class="feature-description">
                See your baked textures before you bake them!
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/SmartVis.webp" alt="Bake Visualizer">
            </div>
          </div>
        </div>
        <!-- Slide 2: Multi Object Baking -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Multi Object Baking</h3>
              <div class="feature-description">
                Bake entire collections simultaneously.
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/multibake2.webp" alt="Multi Object Baking">
            </div>
          </div>
        </div>
        <!-- Slide 3: Profiles -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Profiles</h3>
              <div class="feature-description">
                Create your own bake setup profile.<br>
                You can also save/load to external files
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/ProfileGen.webp" alt="Profiles">
            </div>
          </div>
        </div>
        <!-- Slide 4: Multi Texture Baking -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Multi Texture Baking</h3>
              <div class="feature-description">
                Bake multiple textures with a single click.
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/HighToLow2X.webp" alt="Multi Texture Baking">
            </div>
          </div>
        </div>
        <!-- Slide 5: Channel Packing -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Channel Packing</h3>
              <div class="feature-description">
                Bake a different surface property <br> to each channel in the RGBA Channels
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/BakeFinal.webp" alt="Channel Packing">
            </div>
          </div>
        </div>
        <!-- Slide 6: Decal Baking -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Decal Baking</h3>
              <div class="feature-description">
                Apply decals to your desired object's surface.<br>
                Support for decal addons like <a href="https://blendermarket.com/products/ultistamp" target="_blank">UltiStamp</a>
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/Decals1.webp" alt="Decal Baking">
            </div>
          </div>
        </div>
        <!-- Slide 7: High to Low Baking -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>High to Low Baking</h3>
              <div class="feature-description">
                Transfer surface details from high-poly to low-poly meshes.
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/superman.webp" alt="High to Low Baking">
            </div>
          </div>
        </div>
        <!-- Slide 8: Special Bakes -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Special Bakes</h3>
              <div class="feature-description">
                Variety of bake types and new ones as well.
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/Baketex.webp" alt="Special Bakes">
            </div>
          </div>
        </div>
        <!-- Slide 9: Bake Post Processing -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Bake Post Processing</h3>
              <div class="feature-description">
                Apply antialiasing, denoising, sharpening and <br>
                configured in the profile
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/ppmov.webp" alt="Special Bakes">
            </div>
          </div>
        </div>
        <!-- Slide 10: Finalize -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>Finalize</h3>
              <div class="feature-description">
                Automatically setup textures for quick export
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/finalize.webp" alt="Finalize">
            </div>
          </div>
        </div>
        <!-- Slide 11: UDIM Visualizer -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>UDIM Visualizer</h3>
              <div class="feature-description">
                See how the resolution will be defined per UDIM tile
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/udimvis.webp" alt="UDIM Visualizer">
            </div>
          </div>
        </div>
        <!-- Slide 12: UDIMs -->
        <div class="carousel-item">
          <div class="p-4 d-flex feature-item flex-column">
            <div class="feature-text">
              <h3>UDIMs</h3>
              <div class="feature-description">
                UDIMs are detected automatically from the mesh
              </div>
            </div>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/udim2.webp" alt="UDIMs">
            </div>
          </div>
        </div>
      </div>
    </div>   
    
    <h2>Simple to use</h2>
    <!-- Steps Carousel -->
    <div id="stepsCarousel" class="carousel slide rounded-carousel" data-bs-pause="hover">
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Step 1"></button>
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="1" aria-label="Step 2"></button>
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="2" aria-label="Step 3"></button>
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="3" aria-label="Step 4"></button>
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="4" aria-label="Step 5"></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="step-item">
            <p>Step 1: Install the addon .zip from Blender Properties</p>
            <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/tut1.webp" alt="Step 1">
          </div>
        </div>
        <div class="carousel-item">
          <div class="step-item">
            <p>Step 2: Select your objects to bake</p>
            <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/tut2.webp" alt="Step 2">
          </div>
        </div>
        <div class="carousel-item">
          <div class="step-item">
            <p>Step 3: Set up your bake profiles.</p>
            <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/tut2_5.webp" alt="Step 3">
          </div>
        </div>
        <div class="carousel-item">
          <div class="step-item">
            <p>Step 4: Set your target folder and bake</p>
            <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/tut3.webp" alt="Step 4">
          </div>
        </div>
        <div class="carousel-item">
          <div class="step-item">
            <p>Step 5: Create an export ready copy with Finalize</p>
            <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/tut4.webp" alt="Step 5">
          </div>
        </div>
      </div>
    </div>
    
    <h2>Documentation</h2>
    <p>Access the add-on's documentation, including videos and detailed explanations:</p>
    <p>
      <a href="" target="_blank">Ultibake Documentation[Under Construction]</a>
    </p>
    
    <h2>Support</h2>
    <p>If you have any questions, issues, or suggestions, join our Discord group:</p>
    <p>
      <a href="https://discord.gg/Pm7TDf2rV5" target="_blank">https://discord.gg/Pm7TDf2rV5</a>
    </p>
    
    <!-- Changelog Header Outside the Box -->
    <h2>Changelog</h2>
    <!-- Changelog Box (Now the last element) -->
    <div id="changelog-box">
      <p>Loading latest changes...</p>
    </div>
  </div>
  
  <!-- Bootstrap 5 Bundle with Popper (JS) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Fitty Library for auto-resizing text -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fitty/2.3.6/fitty.min.js"></script>
  <script>
    // Initialize fitty on feature descriptions
    fitty('.feature-description', {
      minSize: 12,
      maxSize: 36,
      multiLine: false
    });
    
    // Make every carousel clickable to move to the next slide
    document.querySelectorAll('.carousel').forEach(function(carousel) {
      carousel.style.cursor = 'pointer';
      carousel.addEventListener('click', function(e) {
        var instance = bootstrap.Carousel.getInstance(carousel);
        if (!instance) {
          instance = new bootstrap.Carousel(carousel);
        }
        instance.next();
      });
    });
    
    // Fetch and parse all changelog entries from the Markdown file
    const changelogUrl = 'https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/Changelogs.md';
    
    fetch(changelogUrl)
      .then(response => response.text())
      .then(text => {
        // Split entries by double newlines and reverse the array so the newest entries come first
        let entries = text.trim().split(/\n\s*\n/).reverse();
        let html = "";
        
        entries.forEach(entry => {
          // Remove any leading '>' characters and trim the entry
          entry = entry.replace(/^>\s*/, '');
          let lines = entry.split('\n');
          
          // Process the header line
          let headerLine = lines[0].trim();
          let headerText = headerLine.startsWith("##") ? headerLine.replace(/^##\s*/, '') : headerLine;
          
          // Determine header color based on keywords
          let lowerHeader = headerText.toLowerCase();
          let categories = [];
          if(lowerHeader.includes("bug") || lowerHeader.includes("fix")){
            categories.push("red");
          }
          if(lowerHeader.includes("improvement") || lowerHeader.includes("addition") || lowerHeader.includes("optimization") || lowerHeader.includes("update") || lowerHeader.includes("ures") || lowerHeader.includes("stability") ){
            categories.push("Green");
          }
          if(lowerHeader.includes("rework") || lowerHeader.includes("change")){
            categories.push("blue");
          }
          // If multiple categories match, or none, default to white
          let headerColor = (categories.length === 1) ? categories[0] : "white";
          
          let headerHtml = "";
          if (headerLine.startsWith("##")) {
            if(lowerHeader.includes("version increment")){
              headerHtml = `<h5 class="rainbow-text">${headerText}</h5>`;
            } else {
              headerHtml = `<h5 style="color: ${headerColor};">${headerText}</h5>`;
            }
          } else {
            if(lowerHeader.includes("version increment")){
              headerHtml = `<p class="rainbow-text">${headerText}</p>`;
            } else {
              headerHtml = `<p style="color: ${headerColor};">${headerText}</p>`;
            }
          }
          
          // Process the remaining lines without bullet points,
          // wrapping lines that start with "*" in a paragraph with the "update-item" class.
          let contentHtml = "";
          for (let i = 1; i < lines.length; i++) {
            let line = lines[i].trim();
            if (line.startsWith("*")) {
              let item = line.replace(/^\*\s*/, '');
              contentHtml += `<p class="update-item">${item}</p>`;
            } else if (line !== "") {
              contentHtml += `<p>${line}</p>`;
            }
          }
          
          html += `<div class="changelog-entry mb-3">${headerHtml}${contentHtml}</div>`;
        });
        document.getElementById("changelog-box").innerHTML = html;
      })
      .catch(error => {
        document.getElementById("changelog-box").innerHTML = "<p>Error loading changelog.</p>";
        console.error("Error fetching changelog:", error);
      });
  </script>
</body>
</html>
