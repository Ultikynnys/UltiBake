<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ultibake Showcase</title>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Raleway:ital,wght@0,500;1,500&display=swap" rel="stylesheet" />
  
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Link to external CSS file -->
  <link rel="stylesheet" href="style.css" />
  
  <!-- Override CSS for responsive video container -->
  <style>
    .video-container {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 ratio */
      height: 0;
      overflow: hidden;
      width: 100%;
      max-width: none;
    }
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body style="background-color: rgba(255, 255, 255, 0);">
  <div class="container-fluid my-3 content-container">
    <h1>UltiStamp</h1>
    <p>This addon lets you easily apply <strong>decals</strong> to your <strong>Blender</strong> meshes, 
    similar to <strong>Substance Painter</strong>. With built-in <strong><a href="https://blendermarket.com/products/ultibake" target="_blank">Ultibake</a></strong> support, these decals can be baked directly into your textures for seamless export 
    to <strong>game engines</strong>. The addon offers over 100 <strong>PBR</strong> decals, customizable preset packs, 
    and the ability to create new decals from any image. For support or suggestions, join the developerâ€™s 
    <strong><a href="https://discord.gg/Pm7TDf2rV5" target="_blank">Discord</a></strong>.</p>
    
    <!-- Showcase Carousel -->
    <h1>Showcase</h1>
    <div id="featuresCarousel" class="carousel slide rounded-carousel mb-3">
      <!-- Carousel Indicators for Features -->
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="4" aria-label="Slide 5"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="5" aria-label="Slide 6"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="6" aria-label="Slide 7"></button>
        <button type="button" data-bs-target="#featuresCarousel" data-bs-slide-to="7" aria-label="Slide 8"></button>
      </div>
      <div class="carousel-inner">
        <!-- Carousel Item 1 -->
        <div class="carousel-item active">
          <div class="feature-item">
            <h3>Easily clickable empty handles and radial menu buttons</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/6689514acd2a4bcedcc54bd4d3929be4.webp" 
                   alt="Clickable handles" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 2 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>Advanced decals with alpha masking and full PBR</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/c2bc74ff0ee30d588fb8b67d424371a3.webp" 
                   alt="Advanced decals" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 3 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>A great way to add more detail to existing props</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/d93123ac21101ca34aee5643844588c6.webp" 
                   alt="Detail enhancement" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 4 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>Supports emissive decals</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/d0c935b0540ebd9c916ed5c811f88f80.webp" 
                   alt="Emissive decals" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 5 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>Add decals to transparent materials</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/c115c532252a9126b0ecd120461181f2.webp" 
                   alt="Transparent material decals" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 6 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>Scale Decal UVs for seamless decals</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/1fc0cab7af6ca7de8022208b81e9dfc3.webp" 
                   alt="Scale decal UVs" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 7 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>Bake your decals into textures with Ultibake</h3>
            <div class="feature-image">
              <img src="https://assets.superhivemarket.com/cache/5d27e14527e75651dbafc568acbde26f.png" 
                   alt="Bake decals with Ultibake" class="d-block w-100">
            </div>
          </div>
        </div>
        <!-- Carousel Item 8 -->
        <div class="carousel-item">
          <div class="feature-item">
            <h3>Change the HSV of the stamps</h3>
            <div class="feature-image">
              <img src="https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/color2.webp" 
                   alt="Change HSV" class="d-block w-100">
            </div>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#featuresCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#featuresCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <!-- How to Use Carousel with YouTube Videos -->
    <h1>How to Use</h1>
    <div id="stepsCarousel" class="carousel slide rounded-carousel mb-3">
      <!-- Carousel Indicators for YouTube Videos -->
      <div class="carousel-indicators">
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Start Guide"></button>
        <button type="button" data-bs-target="#stepsCarousel" data-bs-slide-to="1" aria-label="Baking Guide"></button>
      </div>
      <div class="carousel-inner">
        <!-- Start Guide Video -->
        <div class="carousel-item active">
          <div class="step-item">
            <h3>Start Guide</h3>
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/hWIO-FiaHsQ" 
                      title="Start Guide" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                      allowfullscreen></iframe>
            </div>
          </div>
        </div>
        <!-- Baking Guide Video -->
        <div class="carousel-item">
          <div class="step-item">
            <h3>Baking Guide</h3>
            <div class="video-container">
              <iframe src="https://www.youtube.com/embed/xXyf7oBT0rg" 
                      title="Baking Guide" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                      allowfullscreen></iframe>
            </div>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#stepsCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#stepsCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
    
    <!-- Dynamic Changelog -->
    <h2 class="ext">Changelog</h2>
    <div id="changelog-box">
      <p>Loading latest changes...</p>
    </div>
  </div>

  <!-- Bootstrap 5 JS Bundle with Popper (JS) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- Fetch and parse changelog entries -->
  <script>
    const changelogUrl = 'https://raw.githubusercontent.com/Ultikynnys/UltiBake/refs/heads/main/UltiStampLogs.md';
    fetch(changelogUrl)
      .then(response => response.text())
      .then(text => {
        const entries = text.trim().split(/\n\s*\n/).reverse();
        let html = "";
        entries.forEach(entry => {
          // Remove leading '>'
          entry = entry.replace(/^>\s*/, '');
          const lines = entry.split('\n');
          const headerLine = lines[0].trim();
          const headerText = headerLine.startsWith("##") 
            ? headerLine.replace(/^##\s*/, '') 
            : headerLine;
          const lowerHeader = headerText.toLowerCase();
          const categories = [];
          if (lowerHeader.includes("bug") || lowerHeader.includes("fix")) categories.push("red");
          if (lowerHeader.includes("improvement") || lowerHeader.includes("addition") || 
              lowerHeader.includes("optimization") || lowerHeader.includes("update") ||
              lowerHeader.includes("ures") || lowerHeader.includes("stability")) {
            categories.push("Green");
          }
          if (lowerHeader.includes("rework") || lowerHeader.includes("change")) {
            categories.push("blue");
          }
          const headerColor = (categories.length === 1) ? categories[0] : "#333";

          let headerHtml = "";
          if (headerLine.startsWith("##")) {
            headerHtml = lowerHeader.includes("version increment")
              ? `<h5 class="rainbow-text">${headerText}</h5>` 
              : `<h5 style="color: ${headerColor};">${headerText}</h5>`;
          } else {
            headerHtml = lowerHeader.includes("version increment")
              ? `<p class="rainbow-text">${headerText}</p>` 
              : `<p style="color: ${headerColor};">${headerText}</p>`;
          }

          let contentHtml = "";
          for (let i = 1; i < lines.length; i++) {
            const line = lines[i].trim();
            if (line.startsWith("*")) {
              contentHtml += `<p class="update-item">${line.replace(/^\*\s*/, '')}</p>`;
            } else if (line !== "") {
              contentHtml += `<p>${line}</p>`;
            }
          }

          html += `<div class="changelog-entry mb-3">${headerHtml}${contentHtml}</div>`;
        });
        document.getElementById("changelog-box").innerHTML = html;
      })
      .catch(error => {
        document.getElementById("changelog-box").innerHTML = "<p>Error loading changelog.</p>";
        console.error("Error fetching changelog:", error);
      });
  </script>
</body>
</html>
